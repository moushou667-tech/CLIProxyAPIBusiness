name: Sync Fork

  on:
    schedule:
      - cron: '0 18 * * *'
    workflow_dispatch:

  jobs:
    sync:
      runs-on: ubuntu-latest
      permissions:
        contents: write

      steps:
        - uses: actions/checkout@v4
          with:
            fetch-depth: 0

        - name: Sync upstream
          run: |
            git remote add upstream https://github.com/router-for-me/CLIProxyAPIBusiness.git
            git fetch upstream
            git checkout main
            git reset --hard upstream/main
            git push origin main --force
